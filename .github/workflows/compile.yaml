name: Render PDF
on:
  workflow_dispatch:
  push:
    paths-ignore:
      - '**.pdf'
jobs:
  render-paper:
    runs-on: ubuntu-latest
    permissions:  
      contents: write  # 'write' access to repository contents
    steps:
      - uses: actions/checkout@v4
      # Install fonts
      # - uses: fontist/setup-fontist@v2
      # - run: fontist install "Helvetica Nueu"
      - run: sudo apt-get update && sudo apt-get install libghc-typst-symbols-dev

      - uses: typst-community/setup-typst@v3
      - run: typst compile main.typ davidyuk_cv.pdf --font-path ~/.fontist/fonts
      - run: |
          git config --local user.email "github-actions[bot]@users.noreply.github.com"
          git config --local user.name "github-actions[bot]"
          git commit -a -m "update cv"
      - uses: ad-m/github-push-action@master
